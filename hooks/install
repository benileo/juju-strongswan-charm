#!/usr/bin/env python


from lib.sshelpers import (
	ss_packages,
	ss_sysctl
)
from charmhelpers.core import (
	hookenv
)
from charmhelpers.fetch import (
	apt_update,
	apt_install
)


class Strongswan():
	def __init__(self):
		self.config = hookenv.config()

	def pre_install(self):
		ss_sysctl(self.config)

	def install(self):
		hookenv.log("Calling apt to install strongswan packages based on config.yaml")
		apt_update(fatal=False) 
		pkgs = ss_packages(self.config) # Get list of packages to install	
		apt_install(packages=pkgs,fatal=True)
		hookenv.log("Installation of Strongswan packages complete")




if __name__ == "__main__":
    strongswan = Strongswan()
    strongswan.pre_install()
    strongswan.install()

