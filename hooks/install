#!/usr/bin/env python3


from strongswan.apt import (
	ss_apt_pkgs,
	ss_apt_update
)
from strongswan.sysctl import(
	cp_config_files
)
from charmhelpers.core import (
	hookenv
)
from charmhelpers.fetch import (
	apt_install
)

# global config 
config = hookenv.config()

def pre_install():
	#iptables
	cp_config_files()
	
		
def install():
	ss_apt_update()
	pkgs = ss_apt_pkgs(config)
	apt_install(packages=pkgs,fatal=True)


if __name__ == "__main__":
	hookenv.log("INFO:   Running the install hook")
	pre_install()
	install()
	hookenv.log("INFO:   Install hook has completed.")